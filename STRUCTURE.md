# Структура проекта CHOKERZ

## Общая информация

**Название:** CHOKERZ — амуниция для животных  
**Платформа:** 1С-Битрикс (Бизнес редакция)  
**Тип:** Интернет-магазин  
**Адрес разработки:** https://dev.chokerz.ru/

## Технические требования

### Стек технологий

**Frontend:**
- Ванильный JavaScript (ES6+)
- CSS Flexbox / Grid
- BEM-нейминг
- Шрифты: Montserrat cyr (основной), Coco Gothic Small Caps, Spectral, Inter, IBM Plex Sans
- Форматы: WebP для изображений, SVG для иконок

**Backend:**
- 1С-Битрикс: Управление сайтом — Бизнес редакция
- Разработка только в директории `/local/`
- Стандартные компоненты и события Битрикс
- Управляемый кеш

**Запрещено:**
- Изменение файлов в `/bitrix/`
- jQuery и подобные библиотеки
- Кастомные таблицы для стандартных сущностей
- Хардкод данных в шаблонах
- Inline PHP-логика в header/footer

## Инфоблоки

### 1. Каталог товаров
**Символьный код:** `catalog_products`

**Свойства:**
- Тип изделия (список)
- Материал (список)
- Назначение (список)
- Размер (строка)
- Цвет (строка)
- Хит / Новинка / Акция (флаги)
- Наличие (да/нет)
- Артикул (строка)
- Ссылка на Ozon (строка)
- Ссылка на Wildberries (строка)
- Ссылка на Яндекс.Маркет (строка)

**Торговые предложения (SKU):**
- Размер
- Цвет
- Материал

### 2. Страницы
**Символьный код:** `pages`

**Свойства:**
- Заголовок страницы (строка)
- Текст страницы (HTML)
- Мета-теги (title, description)

### 3. Блог
**Символьный код:** `blog`

**Свойства:**
- Тип записи (статья / видео)
- Категория (список)
- Теги (множественный выбор)
- Дата публикации (дата)
- Превью-изображение (файл)

### 4. Отзывы
**Символьный код:** `reviews` (или реализация через HL-блок)

**Свойства:**
- Текст отзыва (текст)
- Оценка (число 1-5)
- Источник (Озон / ВБ / ручной)
- Привязка к товару (элемент каталога)
- Дата (дата)

### 5. Видео
**Символьный код:** `videos`

**Свойства:**
- Название (строка)
- Описание (текст)
- Ссылка на видео (строка)
- Превью-изображение (файл)

### 6. Преимущества
**Символьный код:** `advantages`

**Свойства:**
- Заголовок (строка)
- Описание (текст)
- Иконка (файл или выбор из списка)

## Структура файлов

```
/local/
├── components/                    # Кастомные компоненты
│   ├── custom/
│   │   ├── catalog.filter/       # Фильтр каталога
│   │   ├── catalog.item/         # Карточка товара
│   │   ├── wishlist/             # Избранное
│   │   └── ...
│   └── bitrix/                   # Переопределенные компоненты Битрикс
│       ├── catalog/              # Каталог
│       ├── catalog.section/      # Раздел каталога
│       ├── catalog.element/      # Элемент каталога
│       ├── sale.order.ajax/      # Оформление заказа
│       └── ...
├── templates/                    # Шаблоны сайта
│   └── chokerz/                  # Основной шаблон
│       ├── header.php            # Шапка
│       ├── footer.php            # Подвал
│       ├── styles/               # Стили
│       │   ├── base/            # Базовые стили
│       │   ├── blocks/          # Блоки по BEM
│       │   ├── layout/          # Макет
│       │   └── main.css         # Основной файл
│       ├── js/                   # JavaScript
│       │   ├── modules/         # Модули
│       │   ├── vendor/          # Библиотеки (если нужны)
│       │   └── main.js          # Точка входа
│       └── images/               # Изображения
├── php_interface/                # Кастомизация ядра
│   ├── init.php                 # Инициализация
│   └── include/                 # Включаемые файлы
├── modules/                      # Кастомные модули
│   └── chokerz/                 # Модуль проекта
│       ├── install/             # Установка
│       └── lib/                 # Классы
└── tools/                        # Вспомогательные скрипты
    ├── import/                  # Импорт данных
    └── cron/                    # Cron-задачи
```

## Функционал

### 1. Каталог и товары

**Фильтрация:**
- Компонент: `catalog.smart.filter`
- Кастомный вывод цвета (кружки)
- Мобильное сворачивание групп

**Сортировка:**
- По дате
- По популярности
- По цене
- По рейтингу
- По материалу
- По размеру
- По наличию

**Пагинация:**
- Desktop: стандартная + кнопка "Загрузить ещё"
- Mobile: автоматически "Загрузить ещё"

**Импорт товаров:**
- Источник: Озон (API)
- Механизм: самописный скрипт или модуль Битрикс
- Синхронизация: регулярная

### 2. Корзина и оформление заказа

**Компонент:** `sale.order.ajax`

**Доставка:**
- СДЭК (официальный модуль)
- Почта России (официальный модуль)
- Озон (официальный модуль)

**Оплата:**
- ЮKassa
- Robokassa
- Оплата при получении

### 3. Личный кабинет

**Структура:**
- Профиль пользователя (стандартный + кастомные поля)
- Адреса доставки
- История заказов
- Wishlist (избранное)

**Wishlist реализация:**
- Через Highload-блок
- Привязка: user_id ↔ product_id

**Дополнительно:**
- Смена пароля
- Выход со всех устройств
- Telegram-уведомления (webhook + bot API)

### 4. Поиск

**Логика:**
- Единое поле поиска в шапке
- Поиск по: товарам, блогу, страницам

**Результаты:**
- Вкладка "Все" (товары + информация)
- Вкладка "Товары" (только товары, с фильтрацией)
- Вкладка "Информация" (статьи, видео, страницы)

**Умный поиск:**
- Морфология (стандартная Битрикс)
- Исправление опечаток (стандартное)

### 5. Формы

**Типы:**
- Подписка
- Контакты
- Опт

**Валидация:**
- AJAX подсветка полей
- Серверная проверка
- Inline-сообщения
- Сохранение в localStorage ("заполнить позже")

### 6. Интеграция отзывов

**Озон:**
- API: https://www.ozon.ru/seller/10238
- Обновление: 1-2 раза в сутки (cron)

**Wildberries:**
- Парсинг: https://www.wildberries.ru/seller/48237
- При наличии технической возможности

**Рейтинг:**
- Агрегированное значение
- Источники: Озон API, Wildberries парсинг

## SEO

### Метаданные
- Единственный H1 на странице
- Единственный Title
- Единственный Description

### Пагинация
- `rel="canonical"` на родительскую категорию
- 301 редирект с первой страницы пагинации
- Title/Description/H1 одинаковые на всех страницах пагинации

### Дополнительно
- Favicon с прозрачностью
- Open Graph meta
- sitemap.xml
- robots.txt

## Производительность

- WebP для всех изображений
- Lazy Load
- Поддержка HiDPI (Retina)
- Поддержка Ultrawide / Wide screens
- Компонентное кеширование
- HTML-кеш

## Этапы разработки

1. **Анализ и планирование** (завершено)
   - Анализ ТЗ
   - Изучение макетов

2. **Настройка окружения**
   - Установка 1С-Битрикс на сервер
   - Настройка БД
   - Создание структуры `/local/`

3. **Создание инфоблоков**
   - Каталог товаров
   - Страницы
   - Блог
   - Отзывы
   - Видео
   - Преимущества

4. **Верстка шаблона**
   - Главная страница
   - Каталог товаров
   - Карточка товара
   - Контентные страницы

5. **Интеграция функционала**
   - Корзина и заказы
   - Личный кабинет
   - Поиск
   - Формы

6. **Интеграция с маркетплейсами**
   - Импорт товаров из Озона
   - Синхронизация отзывов
   - Кнопки покупки на маркетплейсах

7. **Настройка доставки и оплаты**
   - СДЭК, Почта России, Озон
   - ЮKassa, Robokassa

8. **SEO и оптимизация**
   - Метаданные
   - Пагинация
   - Производительность

9. **Тестирование и приёмка**
   - Функциональное тестирование
   - Кроссбраузерность
   - Адаптивность
   - Производительность

## Доступы и интеграции

**Требуются от заказчика:**
- FTP доступ к серверу
- Доступ к БД
- Панель администрирования Битрикс
- API ключи Озон, ВБ
- Договоры и ключи для доставки (СДЭК, Почта, Озон)
- Договоры и ключи для оплаты (ЮKassa, Robokassa)
